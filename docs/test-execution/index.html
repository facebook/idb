<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper plugin-docs plugin-id-default docs-version-current docs-doc-page docs-doc-id-test-execution" data-has-hydrated="false">
<head>
<meta charset="UTF-8">
<meta name="generator" content="Docusaurus v3.7.0">
<title data-rh="true">Test Execution | idb</title><meta data-rh="true" name="viewport" content="width=device-width,initial-scale=1"><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://fbidb.io/docs/test-execution"><meta data-rh="true" property="og:locale" content="en"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Test Execution | idb"><meta data-rh="true" name="description" content="Test execution is a well-supported feature of idb. Supporting xctest run as a primitive means that idb can be used in automated scenarios such as continuous integration or IDEs."><meta data-rh="true" property="og:description" content="Test execution is a well-supported feature of idb. Supporting xctest run as a primitive means that idb can be used in automated scenarios such as continuous integration or IDEs."><link data-rh="true" rel="icon" href="/img/favicon.png"><link data-rh="true" rel="canonical" href="https://fbidb.io/docs/test-execution"><link data-rh="true" rel="alternate" href="https://fbidb.io/docs/test-execution" hreflang="en"><link data-rh="true" rel="alternate" href="https://fbidb.io/docs/test-execution" hreflang="x-default"><script src="https://buttons.github.io/buttons.js"></script><link rel="stylesheet" href="/assets/css/styles.37326b2d.css">
<script src="/assets/js/runtime~main.6e9a5379.js" defer="defer"></script>
<script src="/assets/js/main.776d52d2.js" defer="defer"></script>
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){try{return new URLSearchParams(window.location.search).get("docusaurus-theme")}catch(t){}}()||function(){try{return window.localStorage.getItem("theme")}catch(t){}}();t(null!==e?e:"light")}(),function(){try{const a=new URLSearchParams(window.location.search).entries();for(var[t,e]of a)if(t.startsWith("docusaurus-data-")){var n=t.replace("docusaurus-data-","data-");document.documentElement.setAttribute(n,e)}}catch(t){}}(),document.documentElement.setAttribute("data-announcement-bar-initially-dismissed",function(){try{return"true"===localStorage.getItem("docusaurus.announcement.dismiss")}catch(t){}return!1}())</script><div id="__docusaurus"><link rel="preload" as="image" href="/img/oss_logo.png"><div role="region" aria-label="Skip to main content"><a class="skipToContent_fXgn" href="#__docusaurus_skipToContent_fallback">Skip to main content</a></div><div class="announcementBar_mb4j" style="background-color:#20232a;color:#fff" role="banner"><div class="content_knG7 announcementBarContent_xLdY">Support Ukraine ðŸ‡ºðŸ‡¦ <a target="_blank" rel="noopener noreferrer" href="https://opensource.fb.com/support-ukraine"> Help Provide Humanitarian Aid to Ukraine</a>.</div></div><nav aria-label="Main" class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Toggle navigation bar" aria-expanded="false" class="navbar__toggle clean-btn" type="button"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><b class="navbar__title text--truncate">idb</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/overview">Getting Started</a><a class="navbar__item navbar__link" href="/docs/installation">Docs</a><a href="https://github.com/facebook/idb" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_nPIU"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_vylO colorModeToggle_DEke"><button class="clean-btn toggleButton_gllP toggleButtonDisabled_aARS" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)" aria-live="polite" aria-pressed="false"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_pyhR"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_wfgR"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div><div class="navbarSearchContainer_Bca1"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div id="__docusaurus_skipToContent_fallback" class="main-wrapper mainWrapper_z2l0"><div class="docsWrapper_hBAB"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_sjWU" type="button"></button><div class="docRoot_UBD9"><aside class="theme-doc-sidebar-container docSidebarContainer_YfHR"><div class="sidebarViewport_aRkj"><div class="sidebar_njMd"><nav aria-label="Docs sidebar" class="menu thin-scrollbar menu_SIkG menuWithAnnouncementBar_GW3s"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/overview">Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/installation">Installation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/guided-tour">Guided Tour</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/architecture">Architecture</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/development">Development</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/commands">Commands</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/fbsimulatorcontrol">FBSimulatorControl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/fbdevicecontrol">FBDeviceControl</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/video">Video</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" href="/docs/test-execution">Test Execution</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/file-containers">File Containers</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/accessibility">Accessibility Automation</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-1 menu__list-item"><a class="menu__link" href="/docs/faqs">Frequently Asked Questions</a></li></ul></nav></div></div></aside><main class="docMainContainer_TBSr"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_VOVn"><div class="docItemContainer_Djhp"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Z_bl" aria-label="Breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a aria-label="Home page" class="breadcrumbs__link" href="/"><svg viewBox="0 0 24 24" class="breadcrumbHomeIcon_YNFT"><path d="M10 19v-5h4v5c0 .55.45 1 1 1h3c.55 0 1-.45 1-1v-7h1.7c.46 0 .68-.57.33-.87L12.67 3.6c-.38-.34-.96-.34-1.34 0l-8.36 7.53c-.34.3-.13.87.33.87H5v7c0 .55.45 1 1 1h3c.55 0 1-.45 1-1z" fill="currentColor"></path></svg></a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="name">Test Execution</span><meta itemprop="position" content="1"></li></ul></nav><div class="tocCollapsible_ETCw theme-doc-toc-mobile tocMobile_ITEo"><button type="button" class="clean-btn tocCollapsibleButton_TO0P">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Test Execution</h1></header><p>Test execution is a well-supported feature of idb. Supporting <code>xctest run</code> as a primitive means that idb can be used in automated scenarios such as continuous integration or IDEs.</p>
<p>There are three areas that idb aims to solve on top of Xcode and <code>xcodebuild</code>:</p>
<ol>
<li>Structured Output: idb will output machine readable output when using the <code>--json</code> flag. This is often required for CI systems. <code>xcodebuild</code> now supports the <code>-resultBundlePath</code> flag, which outputs a plist upon completion, but idb also exposes streaming output and can support custom reporters.</li>
<li>Build Once, Run Many, Run Repeated: <code>xcodebuild</code> currently supports &quot;Run Many&quot; with the <code>test-without-building</code> command. However, this imposes more of a burden on the user than is necessary. In many cases idb supports building a singular <code>.xctest</code> bundle and <code>xctest install</code>ing this. This makes it easier to distribute test bundles against many runtimes and also run the same test bundle with a different runtime environment. For example, idb can run the same bundle with different environment variables, without modifying the build output. This makes it ideal for parameterizing the same test bundle with different data inputs. Or running the same test bundle in an Application or Logic Test context.</li>
<li>Listing of Tests: Given an installed test bundle idb also supports listing of tests within a bundle. This means that the user can peek at what tests cases are in a bundle without parsing sources using <code>xctest list</code></li>
<li>Faster test execution environments: &quot;Logic Test&quot; execution is an optimization that idb can use in a Simulator environment. This means that a test can execute much faster by not being injected into a full Application context. If test bundles are fast to execute, idb doesn&#x27;t impose a cost of launching an Application.</li>
</ol>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="installation-of-test-bundles">Installation of Test Bundles<a href="#installation-of-test-bundles" class="hash-link" aria-label="Direct link to Installation of Test Bundles" title="Direct link to Installation of Test Bundles">â€‹</a></h2>
<p>Since iOS Runtimes may be remote from the machine that is executing idb commands, idb needs to support the concept of <code>installation</code>. This is essentially copying across the test bundle artifacts alongside the runtime using <code>xctest install</code>.</p>
<p>By doing so, the idb companion backend then has the test bundle binary to execute against when using <code>xctest run</code>. These bundles are also persisted, which makes caching of test bundles more feasible.</p>
<p>The following shows the installation of a test bundle, listing the available bundles, then the test cases within a installed bundle:</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ idb xctest install Fixtures/Binaries/iOSUnitTestFixture.xctest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">Installed: com.facebook.iOSUnitTestFixture</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ idb xctest list</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">com.facebook.iOSUnitTestFixture | iOSUnitTestFixture | x86_64, i386</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ idb xctest list-bundle com.facebook.iOSUnitTestFixture</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testHostProcessIsMobileSafari</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testHostProcessIsXctest</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testIsRunningInIOSApp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testIsRunningInMacOSXApp</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testIsRunningOnIOS</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testIsRunningOnMacOSX</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testPossibleCrashingOfHostProcess</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testPossibleStallingOfHostProcess</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testWillAlwaysFail</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">iOSUnitTestFixtureTests/testWillAlwaysPass</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<p>This makes the process of <code>xctest</code> management a lot more similar to app management. Using a given test bundle, it&#x27;s then trivial to execute tests against it</p>
<div class="codeBlockContainer_Ckt0 theme-code-block" style="--prism-color:#bfc7d5;--prism-background-color:#292d3e"><div class="codeBlockContent_biex"><pre tabindex="0" class="prism-code language-text codeBlock_bY9V thin-scrollbar" style="color:#bfc7d5;background-color:#292d3e"><code class="codeBlockLines_e6Vv"><span class="token-line" style="color:#bfc7d5"><span class="token plain">$ idb xctest run logic --json com.facebook.iOSUnitTestFixture                                                                                                                                                                                                                         </span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testHostProcessIsMobileSafari&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.22353005409240723, &quot;passed&quot;: false, &quot;crashed&quot;: false, &quot;failureInfo&quot;: {&quot;message&quot;: &quot;(([NSProcessInfo.processInfo.processName isEqualToString:@\&quot;MobileSafari\&quot;]) is true) failed&quot;, &quot;file&quot;: &quot;/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m&quot;, &quot;line&quot;: 50}, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testHostProcessIsXctest&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.0002950429916381837, &quot;passed&quot;: true, &quot;crashed&quot;: false, &quot;failureInfo&quot;: null, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testIsRunningInIOSApp&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.0003999471664428711, &quot;passed&quot;: false, &quot;crashed&quot;: false, &quot;failureInfo&quot;: {&quot;message&quot;: &quot;(([NSClassFromString(@\&quot;UIApplication\&quot;) performSelector:@selector(sharedApplication)]) != nil) failed&quot;, &quot;file&quot;: &quot;/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m&quot;, &quot;line&quot;: 30}, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testIsRunningInMacOSXApp&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.00030100345611572255, &quot;passed&quot;: false, &quot;crashed&quot;: false, &quot;failureInfo&quot;: {&quot;message&quot;: &quot;(([NSClassFromString(@\&quot;NSApplication\&quot;) performSelector:@selector(sharedApplication)]) != nil) failed&quot;, &quot;file&quot;: &quot;/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m&quot;, &quot;line&quot;: 40}, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testIsRunningOnIOS&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.0002809762954711914, &quot;passed&quot;: true, &quot;crashed&quot;: false, &quot;failureInfo&quot;: null, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testIsRunningOnMacOSX&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.0003479719161987306, &quot;passed&quot;: false, &quot;crashed&quot;: false, &quot;failureInfo&quot;: {&quot;message&quot;: &quot;((NSClassFromString(@\&quot;NSView\&quot;)) != nil) failed&quot;, &quot;file&quot;: &quot;/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m&quot;, &quot;line&quot;: 35}, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testPossibleCrashingOfHostProcess&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.0003750324249267579, &quot;passed&quot;: true, &quot;crashed&quot;: false, &quot;failureInfo&quot;: null, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testPossibleStallingOfHostProcess&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.00037300586700439453, &quot;passed&quot;: true, &quot;crashed&quot;: false, &quot;failureInfo&quot;: null, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testWillAlwaysFail&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.0002980232238769531, &quot;passed&quot;: false, &quot;crashed&quot;: false, &quot;failureInfo&quot;: {&quot;message&quot;: &quot;failed - This always fails&quot;, &quot;file&quot;: &quot;/repo_root/iOSUnitTestFixture/iOSUnitTestFixtureTests.m&quot;, &quot;line&quot;: 76}, &quot;activityLogs&quot;: []}</span><br></span><span class="token-line" style="color:#bfc7d5"><span class="token plain">{&quot;bundleName&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;className&quot;: &quot;iOSUnitTestFixtureTests&quot;, &quot;methodName&quot;: &quot;testWillAlwaysPass&quot;, &quot;logs&quot;: [], &quot;duration&quot;: 0.00024402141571044914, &quot;passed&quot;: true, &quot;crashed&quot;: false, &quot;failureInfo&quot;: null, &quot;activityLogs&quot;: []}</span><br></span></code></pre><div class="buttonGroup__atx"><button type="button" aria-label="Copy code to clipboard" title="Copy" class="clean-btn"><span class="copyButtonIcons_eSgA" aria-hidden="true"><svg viewBox="0 0 24 24" class="copyButtonIcon_y97N"><path fill="currentColor" d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg viewBox="0 0 24 24" class="copyButtonSuccessIcon_LjdS"><path fill="currentColor" d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div></div>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-is-a-test-bundle">What is a Test Bundle?<a href="#what-is-a-test-bundle" class="hash-link" aria-label="Direct link to What is a Test Bundle?" title="Direct link to What is a Test Bundle?">â€‹</a></h2>
<p>An <code>xctest</code> bundle is fundamentally a Dynamically Linked Framework that contains executable test code.</p>
<p><code>xctest</code> bundles are loaded at runtime by the process that they are being injected into, just like a plugin or shim. The dynamic library within the <code>.xctest</code> bundle links with <a href="https://developer.apple.com/documentation/xctest" target="_blank" rel="noopener noreferrer"><code>XCTest.framework</code></a> and can also link with other System-Level Frameworks, or code that is statically linked inside the test bundle.</p>
<p>Since these bundles aren&#x27;t substantially different to any other Framework or dynamic library, they can be relocated onto another machine, or amongst many iOS runtimes on the current machine.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="ios-simulators">iOS Simulators<a href="#ios-simulators" class="hash-link" aria-label="Direct link to iOS Simulators" title="Direct link to iOS Simulators">â€‹</a></h2>
<p>Simulators are a common place to execute test bundles, especially when testing unit or integration level functionality that may not have dependencies on running a physical device.</p>
<p>The performance differences between a Simulator and Device are also less relevant if you only care about correctness. Simulators are often easier to manage within a CI environment.</p>
<p>There are a number of test execution environments that idb supports:</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="logic-tests-idb-xctest-run-logic">Logic Tests: <code>idb xctest run logic</code><a href="#logic-tests-idb-xctest-run-logic" class="hash-link" aria-label="Direct link to logic-tests-idb-xctest-run-logic" title="Direct link to logic-tests-idb-xctest-run-logic">â€‹</a></h3>
<p>A Test Bundle that can run in the context of any process, typically used for Unit Tests. These kinds of <code>xctest</code> bundles do not typically require a specific host Application as all code-under-test.</p>
<p>Like all <code>xctest</code> bundles, they can dynamically link the code-under-test at runtime, or statically links the tested code inside the Test Bundle&#x27;s dynamic library.</p>
<p>Logic tests are typically injected into a small host process like the <code>xctest</code> commandline. macOS has a <code>xctest</code> commandline at <code>/usr/bin/xctest/</code>, the iOS Simulator <code>xctest</code> executable is located at <code>$DEVELOPER_DIR/Platforms/iPhoneSimulator.platform/Developer/Library/Xcode/Agents/xctest</code>.</p>
<p>The <code>xctest</code> commandline will load the <code>xctest</code> bundle provided as an argument and run tests according to the arguments, or from an <code>XCTestConfigurationFilePath</code> provided as an environment variable passed to the process.</p>
<p>idb then injects a shim into the <code>xctest</code> process and hooks calls to <code>XCTest.framework</code> methods. This is then used to report results back to idb. This communication happens via a FIFO, passed into the spawned <code>xctest</code> process.</p>
<p>This is not a mode of execution that is supported by Xcode &amp; <code>xcodebuild</code>. However, if you&#x27;re wanting to optimize the performance of your test executions, for instance to get faster signal on code changes, then this is a worthy optimization. The main reason for not using &quot;Logic Tests&quot; is if the Test code or the code-under-test requires an application context, for instance if it&#x27;s using <code>UIApplication</code>. As such, Logic Tests are often well suited to business or domain logic that doesn&#x27;t depend on much more than Foundation, or your own libraries.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="application-tests-idb-xctest-run-app">Application Tests: <code>idb xctest run app</code><a href="#application-tests-idb-xctest-run-app" class="hash-link" aria-label="Direct link to application-tests-idb-xctest-run-app" title="Direct link to application-tests-idb-xctest-run-app">â€‹</a></h3>
<p>Application Tests are similar to Logic Tests, but they run inside an iOS App Host Process. This is typically used for Unit &amp; Integration tests that depend on an Application&#x27;s code, or running inside the context of an Application.</p>
<p>These tests can manipulate the UI within an Application, depend certain behaviours of <code>UIKit</code>, or interact with the Application Delegate. They require a little more work to bootstrap, because of the arbitration between idb and the host process.</p>
<p>idb uses <code>XCTestBootstrap</code> which understands how to perform this arbitration and translate delegate callbacks into machine-readable output.</p>
<h3 class="anchor anchorWithStickyNavbar_LWe7" id="ui-tests-idb-xctest-run-ui">UI Tests: <code>idb xctest run ui</code><a href="#ui-tests-idb-xctest-run-ui" class="hash-link" aria-label="Direct link to ui-tests-idb-xctest-run-ui" title="Direct link to ui-tests-idb-xctest-run-ui">â€‹</a></h3>
<p>In Xcode 7, Apple deprecated <code>UIAutomation</code> and replaced it with UI Testing support inside the <code>XCTest</code> framework itself. This means that UI Tests have a similar execution model to Application Tests, by injecting into an Application Process.</p>
<p>As part of the security model of running these tests, the Test Bundle cannot manipulate the User Interface un-aided. The bundle running inside the application process coordinates with Xcode via a daemon process called <code>testmanagerd</code>.</p>
<p>This mediated connection between the injected application process and IDE Host also allows for <a href="https://github.com/facebook/FBSimulatorControl/blob/main/PrivateHeaders/XCTest/XCTestManager_IDEInterface-Protocol.h" target="_blank" rel="noopener noreferrer">test results to be delivered across a delegate protocol to the IDE Host</a>.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="idb-and-shims">idb and Shims<a href="#idb-and-shims" class="hash-link" aria-label="Direct link to idb and Shims" title="Direct link to idb and Shims">â€‹</a></h2>
<p>In order for idb to extract structured output from a test process, it uses a &quot;shim&quot;: a dynamically linked library that can interpose some of the functionality of <code>XCTest.framework</code>.</p>
<p>The default installation instructions for idb will create shims for you. If you&#x27;re re-locating the <code>idb_companion</code> you should take a <a href="https://github.com/facebook/idb/blob/main/XCTestBootstrap/Configuration/FBXCTestShimConfiguration.m" target="_blank" rel="noopener noreferrer">look at this class</a>, which describes how idb finds these binaries.</p>
<h2 class="anchor anchorWithStickyNavbar_LWe7" id="what-about-fbxctest">What about <code>fbxctest</code>?<a href="#what-about-fbxctest" class="hash-link" aria-label="Direct link to what-about-fbxctest" title="Direct link to what-about-fbxctest">â€‹</a></h2>
<p><code>fbxctest</code> was built as a drop-in replacement for <code>xctool</code> before it. idb doesn&#x27;t have the same command-line interface for test execution, so you will need to invoke idb differently to use it.</p>
<p><code>fbxctest</code> will remain around for the foreseeable future, as both idb and <code>fbxctest</code> depend on the same underlying <code>XCTestBootstrap</code> framework. <code>fbxctest</code> may be deprecated in the future.</p></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages"><a class="pagination-nav__link pagination-nav__link--prev" href="/docs/video"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">Video</div></a><a class="pagination-nav__link pagination-nav__link--next" href="/docs/file-containers"><div class="pagination-nav__sublabel">Next</div><div class="pagination-nav__label">File Containers</div></a></nav></div></div><div class="col col--3"><div class="tableOfContents_bqdL thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#installation-of-test-bundles" class="table-of-contents__link toc-highlight">Installation of Test Bundles</a></li><li><a href="#what-is-a-test-bundle" class="table-of-contents__link toc-highlight">What is a Test Bundle?</a></li><li><a href="#ios-simulators" class="table-of-contents__link toc-highlight">iOS Simulators</a><ul><li><a href="#logic-tests-idb-xctest-run-logic" class="table-of-contents__link toc-highlight">Logic Tests: <code>idb xctest run logic</code></a></li><li><a href="#application-tests-idb-xctest-run-app" class="table-of-contents__link toc-highlight">Application Tests: <code>idb xctest run app</code></a></li><li><a href="#ui-tests-idb-xctest-run-ui" class="table-of-contents__link toc-highlight">UI Tests: <code>idb xctest run ui</code></a></li></ul></li><li><a href="#idb-and-shims" class="table-of-contents__link toc-highlight">idb and Shims</a></li><li><a href="#what-about-fbxctest" class="table-of-contents__link toc-highlight">What about <code>fbxctest</code>?</a></li></ul></div></div></div></div></main></div></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Social</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://twitter.com/fbOpenSource" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li><li class="footer__item"><a href="https://discord.gg/SF26Yqw" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li></ul></div><div class="col footer__col"><div class="footer__title">Contribute</div><ul class="footer__items clean-list"><li class="footer__item"><a href="https://github.com/facebook/idb" target="_blank" rel="noopener noreferrer" class="footer__link-item">Github</a></li></ul></div></div><div class="footer__bottom text--center"><div class="margin-bottom--sm"><a href="https://opensource.facebook.com/" rel="noopener noreferrer" class="footerLogoLink_BH7S"><img src="/img/oss_logo.png" alt="idb" class="footer__logo themedComponent_mlkZ themedComponent--light_NVdE"><img src="/img/oss_logo.png" alt="idb" class="footer__logo themedComponent_mlkZ themedComponent--dark_xIcU"></a></div><div class="footer__copyright">Copyright Â© 2025 Facebook, Inc.</div></div></div></footer></div>
</body>
</html>